[tools]
bun = "1.3.6"
claude = "2.1.12"
lefthook = "2.0.15"

[env]
_.path = "node_modules/.bin"

[settings]
experimental = true
pin = true

[hooks]
postinstall = ["bun install", "lefthook install"]

[tasks.validate]
description = "Validate marketplace and plugin manifests"
run = "bun run scripts/validate-manifests.ts"

[tasks.check-versions]
description = "Verify that changed plugins have version updates"
run = "bun run scripts/verify-version-updates.ts"

[tasks.bump-version]
description = "Bump the version of a plugin based on staged changes"
run = "bun run scripts/bump-plugin-version.ts {{arg(n='plugin')}}"

[tasks."skills:add"]
description = "Install skills and move them to plugins/skills-sh/skills"
run = """
skills add {{args}} && \
if [ -d .agents/skills ]; then \
  mkdir -p plugins/skills-sh/skills && \
  cp -R .agents/skills/* plugins/skills-sh/skills/ && \
  rm -rf .agents/skills && \
  rmdir .agents 2>/dev/null || true; \
fi
"""
